{
  "geolocation_integration": {
    "description": "Данные о геолокации пользователя, запрашиваемые при onboarding",
    "implementation": {
      "browser_api": "navigator.geolocation.getCurrentPosition()",
      "accuracy": "enableHighAccuracy: true",
      "timeout": "10000ms",
      "max_age": "300000ms (5 минут)"
    }
  },
  "data_examples": {
    "successful_location_request": {
      "description": "Успешный запрос геолокации",
      "request_body": {
        "walletAddress": "0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6",
        "country": "United States",
        "birthMonth": "March",
        "birthYear": "1990",
        "isItRelated": "yes",
        "location": {
          "latitude": 40.7128,
          "longitude": -74.0060,
          "accuracy": 15.5,
          "timestamp": "2024-01-15T10:35:00.000Z"
        },
        "submittedAt": "2024-01-15T10:35:00.000Z"
      }
    },
    "location_denied": {
      "description": "Пользователь отказал в доступе к геолокации",
      "request_body": {
        "walletAddress": "0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6",
        "country": "United States",
        "birthMonth": "March",
        "birthYear": "1990",
        "isItRelated": "yes",
        "location": null,
        "submittedAt": "2024-01-15T10:35:00.000Z"
      }
    },
    "high_accuracy_location": {
      "description": "Высокоточная геолокация (GPS)",
      "request_body": {
        "walletAddress": "0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6",
        "country": "Germany",
        "birthMonth": "July",
        "birthYear": "1985",
        "isItRelated": "no",
        "location": {
          "latitude": 52.5200,
          "longitude": 13.4050,
          "accuracy": 3.2,
          "timestamp": "2024-01-15T14:22:30.123Z"
        },
        "submittedAt": "2024-01-15T14:22:30.123Z"
      }
    },
    "low_accuracy_location": {
      "description": "Низкоточная геолокация (IP-based)",
      "request_body": {
        "walletAddress": "0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6",
        "country": "Japan",
        "birthMonth": "December",
        "birthYear": "1992",
        "isItRelated": "yes",
        "location": {
          "latitude": 35.6762,
          "longitude": 139.6503,
          "accuracy": 5000.0,
          "timestamp": "2024-01-15T09:15:45.789Z"
        },
        "submittedAt": "2024-01-15T09:15:45.789Z"
      }
    }
  },
  "location_data_structure": {
    "location": {
      "type": "object | null",
      "description": "Объект с данными о местоположении или null если геолокация недоступна",
      "properties": {
        "latitude": {
          "type": "number",
          "description": "Широта в десятичных градусах",
          "range": "-90 to 90",
          "example": 40.7128
        },
        "longitude": {
          "type": "number", 
          "description": "Долгота в десятичных градусах",
          "range": "-180 to 180",
          "example": -74.0060
        },
        "accuracy": {
          "type": "number",
          "description": "Точность в метрах",
          "range": "0 to infinity",
          "example": 15.5
        },
        "timestamp": {
          "type": "string",
          "description": "Время получения координат в ISO 8601",
          "format": "YYYY-MM-DDTHH:mm:ss.sssZ",
          "example": "2024-01-15T10:35:00.000Z"
        }
      }
    }
  },
  "accuracy_levels": {
    "gps_outdoor": {
      "accuracy": "1-10 meters",
      "description": "GPS на открытом воздухе"
    },
    "gps_indoor": {
      "accuracy": "10-50 meters", 
      "description": "GPS в помещении"
    },
    "wifi_cell": {
      "accuracy": "50-500 meters",
      "description": "WiFi + сотовая сеть"
    },
    "ip_based": {
      "accuracy": "1000-50000 meters",
      "description": "Только по IP адресу"
    }
  },
  "error_handling": {
    "permission_denied": {
      "error_code": 1,
      "description": "Пользователь отказал в доступе к геолокации",
      "fallback": "Пользователь вводит страну вручную"
    },
    "position_unavailable": {
      "error_code": 2,
      "description": "Не удалось определить местоположение",
      "fallback": "Пользователь вводит страну вручную"
    },
    "timeout": {
      "error_code": 3,
      "description": "Превышено время ожидания",
      "fallback": "Пользователь вводит страну вручную"
    }
  },
  "privacy_considerations": {
    "data_retention": "Координаты хранятся только для анализа данных",
    "anonymization": "Точные координаты могут быть обобщены до уровня города/региона",
    "user_consent": "Пользователь должен явно разрешить доступ к геолокации",
    "opt_out": "Пользователь может отказаться и ввести данные вручную"
  },
  "integration_with_refiner": {
    "description": "Данные геолокации передаются в refiner для анализа",
    "example": {
      "refiner_payload": {
        "refiner_id": "default-refiner",
        "audio_url": "https://gateway.storjshare.io/bucket/audio/voice_sample.ogg",
        "metadata": {
          "wallet_address": "0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6",
          "file_name": "voice_sample.ogg",
          "file_size": 2048576,
          "uploaded_at": "2024-01-15T10:40:00.000Z",
          "user_data": {
            "country": "United States",
            "birth_month": "March",
            "birth_year": "1990",
            "is_it_related": "yes",
            "location": {
              "latitude": 40.7128,
              "longitude": -74.0060,
              "accuracy": 15.5,
              "timestamp": "2024-01-15T10:35:00.000Z"
            }
          }
        }
      }
    }
  }
} 